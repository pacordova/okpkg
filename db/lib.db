libusb = {
   url = "https://github.com/libusb/libusb/releases/download/v1.0.29/libusb-1.0.29.tar.bz2",
   sha3 = "e4e8974707ce3055e30ac1a540cd23937939cb856bbe02270404065d4b7c650c",
   build = "./configure",
};

usbutils = {
   url = "https://mirrors.kernel.org/pub/linux/utils/usb/usbutils/usbutils-019.tar.xz",
   sha3 = "e47df53afa3bdcc7f7e4792ae12de2c0bbfb94c9b00c54bbc06b8892ae3e5314",
   build = "meson",
};

--------------------------------------------------------------------------------

_glib2 = {
   url = _db_lookup("glib2")["url"],
   sha3 = _db_lookup("glib2")["sha3"],
   build = "meson",
   flags = { "-Dintrospection=disabled" }
};

gobject-introspection = {
   url = "https://download.gnome.org/sources/gobject-introspection/1.86/gobject-introspection-1.86.0.tar.xz",
   sha3 = "46790be468f4dc724f18c1d316098492de25aa4f9e803b1ab0a439e29fb7bbf3",
   build = "meson",
};

glib2 = {
   url = "https://download.gnome.org/sources/glib/2.86/glib-2.86.4.tar.xz",
   sha3 = "0785ea4fa0563e0c414a8eaaecb03557523604dcaaa6021c35208837d6a1e471",
   build = "meson",
   flags = { "-Dintrospection=enabled" }
};

dbus-glib = {
   url = "https://dbus.freedesktop.org/releases/dbus-glib/dbus-glib-0.114.tar.gz",
   sha3 = "72776008f5283aea3929c720b3c0941556f3081a749d7e179ca18ee969765921",
   build = "./configure",
};

json-glib = {
   url = "https://download.gnome.org/sources/json-glib/1.10/json-glib-1.10.8.tar.xz",
   sha3 = "f0cb53d96a005f6714002fd4711906bde4cc54f8e1cabfb494bccb79f0f88f3b",
   build = "meson",
   flags = { "-D{gtk_doc=disabled,nls=disabled,tests=false}" },
};

libgudev = {
   url = "https://download.gnome.org/sources/libgudev/238/libgudev-238.tar.xz",
   sha3 = "6500e55c1ceeaf85747d3eeaebd57e1cfc7fae4b5b4ceb7161cd8ab059d1863d",
   build = "meson",
};

upower = {
   url = "https://gitlab.freedesktop.org/upower/upower/-/archive/v1.91.1/upower-v1.91.1.tar.bz2",
   sha3 = "7a060d2240e473774de9911ae3685ebb6d77ec385b16de339b957204768997cc",
   build = "meson",
   flags = {
      "-Dsystemdsystemunitdir=no",
      "-Dudevrulesdir=/usr/lib64/udev/rules.d",
      "-D{gtk-doc,man}=false",
   },
   prepare = [[ sed '/parse_version/d' -i src/linux/integration-test.py ]]
};

vala = {
   url = "https://download.gnome.org/sources/vala/0.56/vala-0.56.18.tar.xz",
   sha3 = "19f1b9220be852f67ac7bd42db6ef0eb698570910c3d22f5e91c82d8be9fb02b",
   build = "./configure",
   flags = {
      "--enable-{python3=yes,python=no,valadoc=no}",
   },
   prepare = [[ sed -i '/gvc.h/a#define TRUE 1' libvaladoc/gvc-compat.c ]]
};

--------------------------------------------------------------------------------

alsa-lib = {
   url = "https://alsa-project.org/files/pub/lib/alsa-lib-1.2.15.3.tar.bz2",
   sha3 = "fee6cd0697b00550565d862076226f78bf221875bd9f3b236aade909b8858979",
   build = "./configure",
};

alsa-utils = {
   url = "https://alsa-project.org/files/pub/utils/alsa-utils-1.2.15.2.tar.bz2",
   sha3 = "85de88073a5784ccad41f66235d66da42cdad25a7a6fffd4c7f18610975c5cf4",
   build = "./configure",
   flags = {
      "--with-udev-rules-dir=/usr/lib64/udev/rules.d",
      "--disable-{alsaconf,bat,xmlto}",
      "--with-curses=ncursesw",
   }
};

argon2 = {
   url = "https://github.com/P-H-C/phc-winner-argon2/archive/20190702/phc-winner-argon2-20190702.tar.gz",
   sha3 = "8147687cbaa78ac3fa5ef0d07996934b741621e1c24705479ae09bf17a8976aa",
   build = "make",
   flags = { "LIBRARY_REL=lib64" }
};

dav1d = {
   url = "https://code.videolan.org/videolan/dav1d/-/archive/1.5.3/dav1d-1.5.3.tar.gz",
   sha3 = "224464a32663c829ee799480c6cad3bf677c9307940ae76ed000710d6fe9974b",
   build = "meson",
};

libogg = {
   url = "https://downloads.xiph.org/releases/ogg/libogg-1.3.6.tar.xz",
   sha3 = "d9b1643759da4315d1122cd3ec8b09db6c2cc8ca4986b7d29ff6c0c349ca822d",
   build = "./configure",
};

flac = {
   url = "https://downloads.xiph.org/releases/flac/flac-1.5.0.tar.xz",
   sha3 = "bd579a99270882c15d9d6e0911dbb74d47a7e2ba904aa892b93c88cc0f5eed86",
   build = "./configure",
   flags = { "--disable-thorough-tests" }
};

fribidi = {
   url = "https://github.com/fribidi/fribidi/releases/download/v1.0.16/fribidi-1.0.16.tar.xz",
   sha3 = "a731bd3ee010661adfab760ce854a8bd337bb7972ec0a530a41ce1a32992b0c2",
   build = "meson",
};

fuse3 = {
   url = "https://github.com/libfuse/libfuse/releases/download/fuse-3.18.1/fuse-3.18.1.tar.gz",
   sha3 = "a712c7c7fefd4c4fe6d4792a9c8a5cb3b3f460db741b39cd8d2803498a3f0c54",
   build = "meson",
   flags = { "-Dexamples=false" },
   prepare = [[ sed -i '/^udev/,$ s/^/#/' util/meson.build ]],
   post = [[ chmod u+s $destdir/usr/bin/fusermount3 ]]
};

graphite = {
   url = "https://github.com/silnrsi/graphite/releases/download/1.3.14/graphite2-1.3.14.tgz",
   sha3 = "bccf21b15d3278bfcb4601f1e0e2cecfb48385575c309788f524465a5139f9ff",
   build = "cmake",
   flags = { "-DLIB_SUFFIX=64" },
   prepare = [[ sed -i '/cmptest/d' tests/CMakeLists.txt ]]
};

iso-codes = {
   url = "https://salsa.debian.org/iso-codes-team/iso-codes/-/archive/v4.20.1/iso-codes-v4.20.1.tar.gz",
   sha3 = "5b0a3402ae3eba3b59fac10b8209f34d0b02d48925c42e2fb17cf7b00e92e2ad",
   build = "meson",
};

json-c = {
   url = "https://s3.amazonaws.com/json-c_releases/releases/json-c-0.18.tar.gz",
   sha3 = "327c1f6b51bc9c13eacc2ac6db583edb43de07d36f8ef49e2ca69b3d3bbc029c",
   build = "cmake",
   flags = {
      "-DBUILD_{STATIC_LIBS=OFF,TESTING=OFF}",
      "-DENABLE_{THREADING=ON,RDRAND=OFF}",
   }
};

lame = {
   url = "https://downloads.sourceforge.net/lame/lame-3.100.tar.gz",
   sha3 = "36700934b5b3e64f2e3ff33ee85bd7fc033890aa92d1f6a0a9b5acc2a3a0d199",
   build = "./configure",
   flags = { "--enable-{nasm=yes,mp3rtp=yes,gtktest=no}" }
};

lcms2 = {
   url = "https://github.com/mm2/Little-CMS/releases/download/lcms2.18/lcms2-2.18.tar.gz",
   sha3 = "bd906e4aed77d2c5a6e60f1d32ca9f69525a793be6ee3b62a58b8db15946f151",
   build = "./configure",
};

libarchive = {
   url = "https://github.com/libarchive/libarchive/releases/download/v3.8.5/libarchive-3.8.5.tar.xz",
   sha3 = "e55714cf7317edee13c6095691d6d80013e9b13f096dffaad420262b462827ec",
   build = "./configure",
   flags = { "--without-nettle" }
};

libconfig = {
   url = "https://github.com/hyperrealm/libconfig/archive/v1.8.2/libconfig-1.8.2.tar.gz",
   sha3 = "e9eb7dbf91f9e0d8692a2898e743874a71d3eaa8db03b8cfccbe333736d16665",
   build = "cmake",
};

libev = {
   url = "http://dist.schmorp.de/libev/libev-4.33.tar.gz",
   sha3 = "ba1e921dd20ef633308f837e958e136b5ec80cd73683fd1bdb1ed48ceb59cf1b",
   build = "./configure",
};

libevent = {
   url = "https://github.com/libevent/libevent/releases/download/release-2.1.12-stable/libevent-2.1.12-stable.tar.gz",
   sha3 = "aeadcbd599fc49e5fe9554a668093e4bdc53cf9fd177d099bce41e46ec0b783d",
   build = "./configure",
   prepare = [[ sed -i 's/python/&3/' event_rpcgen.py ]]
};

libexif = {
   url = "https://github.com/libexif/libexif/releases/download/v0.6.25/libexif-0.6.25.tar.xz",
   sha3 = "7237c460419244249b8350669b2434960c93f276a809f80e7d9a8a4535762984",
   build = "./configure",
   flags = { "--with-doc-dir=/usr/share/doc/libexif" }
};

libinih = {
   url = "https://github.com/benhoyt/inih/archive/r62/inih-r62.tar.gz",
   sha3 = "1780083ca7c2a09b187a216ee4e05593afacca097752edbef5273c35cc65b1e3",
   build = "meson",
};

libjpeg-turbo = {
   url = "https://github.com/libjpeg-turbo/libjpeg-turbo/releases/download/3.1.3/libjpeg-turbo-3.1.3.tar.gz",
   sha3 = "6766f76788820f0d672cd6bd19dd77b7879f80391305327083ba58b55942e493",
   build = "cmake",
   flags = { "-DENABLE_STATIC=OFF", "-DWITH_{JPEG8=ON,JAVA=OFF}" }
};

libmnl = {
   url = "https://netfilter.org/projects/libmnl/files/libmnl-1.0.5.tar.bz2",
   sha3 = "0f289aaf93935856a674b8c5c9e6b390f94f348965d899f285a1d4d259081181",
   build = "./configure",
};

libnftnl = {
   url = "https://netfilter.org/pub/libnftnl/libnftnl-1.3.1.tar.xz",
   sha3 = "8dbf69796a245bf9778a6044ee9d03d82472d0ec55d591779762b57fb9b2743a",
   build = "./configure",
};

libnl3 = {
   url = "https://github.com/thom311/libnl/releases/download/libnl3_12_0/libnl-3.12.0.tar.gz",
   sha3 = "5e84419a3c2a6e7f5391cc6be37cba06ce2f245c5b6e7a9cde3548ae64a09a60",
   build = "./configure",
   flags = { "--disable-cli" }
};

libpcap = {
   url = "https://www.tcpdump.org/release/libpcap-1.10.6.tar.xz",
   sha3 = "a7d286b61d9595b9c830d574f0de81a36aee3b1a5bffb8fe0c752a631231b954",
   build = "./configure",
};

libpng = {
   url = "https://downloads.sourceforge.net/libpng/libpng-1.6.55.tar.xz",
   sha3 = "961ba2e494ab49add23af966dcffdff83f63387ac7bd7852ec9bbae91e5e328b",
   build = "./configure",
};

libunistring = {
   url = "https://ftp.gnu.org/gnu/libunistring/libunistring-1.4.2.tar.xz",
   sha3 = "194416611149e2f58480feb262897e7e72036a4ed7106c8a5a71706966a6826f",
   build = "./configure",
};

libidn2 = {
   url = "https://ftp.gnu.org/gnu/libidn/libidn2-2.3.8.tar.gz",
   sha3 = "ef4836ef6f5a870da184018c363894095631e892cf4f1db6719cab8f9d9ed862",
   build = "./configure",
   post = [[ rm -fr $destdir/usr/bin $destdir/usr/share/man/man1 ]]
};

libpsl = {
   url = "https://github.com/rockdaboot/libpsl/releases/download/0.21.5/libpsl-0.21.5.tar.gz",
   sha3 = "41c5824497c1e40e8c97eab9027fd0b4f74e9bd1c9b482f5d8a92261c779a07e",
   build = "./configure",
};

libsass = {
   url = "https://github.com/sass/libsass/archive/3.6.6/libsass-3.6.6.tar.gz",
   sha3 = "9637cd39de53582abc24deefb2ed3c28c92db591c81f4765dd58c287631b2667",
   prepare = [[ autoreconf -fi ]],
   build = "./configure",
};

libsodium = {
   url = "https://download.libsodium.org/libsodium/releases/libsodium-1.0.21.tar.gz",
   sha3 = "83064332be146d9d810894373dfbad0ca72ab70cc11c524f21a1f9ab40cfc626",
   build = "./configure",
};

libtasn1 = {
   url = "https://ftp.gnu.org/gnu/libtasn1/libtasn1-4.21.0.tar.gz",
   sha3 = "5ed364fb0fd52e732b259953dc2650cbf320c26fdc9964dd5fa6416f8f444f09",
   build = "./configure",
};

libtiff = {
   url = "https://download.osgeo.org/libtiff/tiff-4.7.1.tar.xz",
   sha3 = "d83a9dcc4a8a838b4d0ffa4fbdfeba5bb813375ebbc7d248ff61dfee2eff9283",
   build = "./configure",
};

libtirpc = {
   url = "https://downloads.sourceforge.net/libtirpc/libtirpc-1.3.7.tar.bz2",
   sha3 = "728ec7837a77f18bb15999aa07687575b8bdfc036c44bb2790819d9478b794e6",
   build = "./configure",
   flags = { "--disable-gssapi" }
};

libuv = {
   url = "https://dist.libuv.org/dist/v1.52.0/libuv-v1.52.0-dist.tar.gz",
   sha3 = "8c5a4df0c1a7102be7a980e946689207efe692e2dd6ba0be6001aca937deca0a",
   build = "./configure",
};

libvorbis = {
   url = "https://downloads.xiph.org/releases/vorbis/libvorbis-1.3.7.tar.xz",
   sha3 = "2c28108d60b3ac2bd0f2a38ac3ee0dc70a24b84f6f6e892df20d266cd11a5e9d",
   build = "./configure",
};

libvpx = {
   url = "https://github.com/webmproject/libvpx/archive/v1.16.0/libvpx-1.16.0.tar.gz",
   sha3 = "3cbb75bdfd9c1d116df345958ad074a5cb85a422ea60fb3b1992a6ca95cde1f4",
   build = "../configure",
   prepare = [[
      sed -i 's/cp -p/cp/' build/make/Makefile
      sed -i 's/perl/:/g;s/diff --version/command -v diff/' configure
   ]],
   flags = {
      "--libdir=/usr/lib64",
      "--enable-{pic,shared}",
      "--enable-{postproc,runtime-cpu-detect}",
      "--enable-{vp8,vp9,vp9-highbitdepth}",
      "--disable-{debug,debug-libs,docs,examples,static,tools,unit-tests}",
      "--disable-install-{bins,docs,srcs}",
      "--as=nasm",
   }
};

libxml2 = {
   url = "https://download.gnome.org/sources/libxml2/2.15/libxml2-2.15.1.tar.xz",
   sha3 = "dd5cd09eb97c315eec5e76922e7506e7482ce8a0e40c9f287658e131be4e24a1",
   build = "./configure",
   flags = {
      "--with-history",
      "--with-legacy",
      "--with-relaxng",
      "--without-icu",
      "--without-docs",
   }
};

libxslt = {
   url = "https://download.gnome.org/sources/libxslt/1.1/libxslt-1.1.45.tar.xz",
   sha3 = "ac90e0851246088eab2c71008c0b72246eada110e1f23a109383089c88d846d6",
   build = "./configure",
   flags = { "--without-python" }
};


libyaml = {
   url = "https://github.com/yaml/libyaml/releases/download/0.2.5/yaml-0.2.5.tar.gz",
   sha3 = "cd085eedddb0caeaa360db3e037155db95f8998d495047f3a8cbee6ee0430022",
   build = "./configure",
};

lzo = {
   url = "https://oberhumer.com/opensource/lzo/download/lzo-2.10.tar.gz",
   sha3 = "7ff1e73460926eae1b8909947cc848594ff1b83234272615b4a48616e42997b1",
   build = "./configure",
};

mtdev = {
   url = "https://bitmath.org/code/mtdev/mtdev-1.1.7.tar.bz2",
   sha3 = "4afd35629a236b17597841cfd394e51af7c215eaaa8097ace8c8da6ffb8cfd71",
   build = "./configure",
};

nghttp2 = {
   url = "https://github.com/nghttp2/nghttp2/releases/download/v1.68.0/nghttp2-1.68.0.tar.xz",
   sha3 = "1aca46c45baeda040bc95dec48b9093164e510c970947dfc52016bf1b51964b6",
   build = "./configure",
   flags = { "--enable-lib-only" }
};

opus = {
   url = "https://downloads.xiph.org/releases/opus/opus-1.6.1.tar.gz",
   sha3 = "48cddaefbf45983912bbbd351f6445bb3793df9fc533f5f54628f10c12db9618",
   build = "meson",
};

p11-kit = {
   url = "https://github.com/p11-glue/p11-kit/releases/download/0.26.2/p11-kit-0.26.2.tar.xz",
   sha3 = "a5f89345be7d73388e326c20a179bab54c55b37b8329b5f07cb902f1d1f9857a",
   build = "meson",
   flags = { 
      "-Dtrust_paths=/etc/ssl/certs/ca-certificates.crt",
   }
};

pixman = {
   url = "https://xorg.freedesktop.org/releases/individual/lib/pixman-0.46.4.tar.xz",
   sha3 = "cb6b7f6846ad1a3ff0efc0e010890898f5311dfa169a1ed2f827dc819d9e54e6",
   build = "meson",
};

popt = {
   url = "http://ftp.rpm.org/popt/releases/popt-1.x/popt-1.19.tar.gz",
   sha3 = "d5188c702608a3a615e5607378e78789e5237e66bf2fa0aba4ac718f803e6021",
   build = "./configure",
};

sassc = {
   url = "https://github.com/sass/sassc/archive/3.6.2/sassc-3.6.2.tar.gz",
   sha3 = "61e05276d1052de3c8403a6895cbca55f50d9f8f3afd2abed1263331dd33e46f",
   prepare = [[ autoreconf -fi ]],
   build = "./configure",
};

uthash = {
   url = "https://github.com/troydhanson/uthash/archive/v2.3.0/uthash-2.3.0.tar.gz",
   sha3 = "d416f46e3922a59538311fc9e20d7303430e31d2be22e5d7abf2f5391fc3d3f7",
   build = _,
   post = [[
      mkdir -p $destdir/usr/include
      cp -p src/*.h $destdir/usr/include
   ]]
};

x264 = {
   url = "https://code.videolan.org/videolan/x264/-/archive/4613ac3c15fd75cebc4b9f65b7fb95e70a3acce1/x264-4613ac3c15fd75cebc4b9f65b7fb95e70a3acce1.tar.bz2",
   sha3 = "8faf6b2c75660bbb8c190bea726665e30ed997ff68cc03e9fb5038066613ac1c",
   build = "./configure",
   flags = {
      "--libdir=/usr/lib64",
      "--enable-{pic,shared}",
      "--disable-{avs,cli,swscale}",
   },
};

x265 = {
   url = "http://ftp.videolan.org/pub/videolan/x265/x265_4.1.tar.gz",
   sha3 = "26b6b359def36f0d9ff073b406e47697baaa9ca67a622e2e46009ceecee72e48",
   build = "cmake",
   flags = {
      "-DLIB_INSTALL_DIR=lib64",
      "-DENABLE_SHARED=ON",
      "-DGIT_ARCHETYPE=1",
      "-DCMAKE_POLICY_VERSION_MINIMUM=3.5",
      "-S source",
   },
   prepare = [[ sed -r '/cmake_policy.*(0025|0054)/d' -i source/CMakeLists.txt ]],
   post = [[ rm -f $destdir/usr/lib64/libx265.a ]]
};
