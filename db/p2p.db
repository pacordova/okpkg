dht = {
   url = "https://github.com/jech/dht/archive/refs/tags/dht-0.27.tar.gz",
   sha3 = "4253f60b496ee893bf040f89e95f1921c63e7a66aa57392159bbc7de00dc54db",
   build = "cmake",
   flags = { "-DCMAKE_INSTALL_INCLUDEDIR=/usr/include/dht" }
   --post = [[ install -D dht.h $destdir/usr/include/dht ]]
};

libdeflate = {
   url = "https://github.com/ebiggers/libdeflate/archive/v1.24/libdeflate-1.24.tar.gz",
   sha3 = "6377b9a21a562d01523108e87035894d402b8c702ecd1eb120131b99214f930f",
   build = "cmake",
};

libnatpmp = {
   url = "https://miniupnp.tuxfamily.org/files/libnatpmp-20230423.tar.gz",
   sha3 = "ddff542a322ba02d14be12b2110aa9eb28ed0e6039f7f90c10d042fedf64767e",
   build = "make",
   flags = { 
      "PREFIX=$destdir", 
      "INSTALLDIRLIB=$destdir/usr/lib64",
      'HEADERS="natpmp.h natpmp_declspec.h"',
   }
};

miniupnpc = {
   url = "https://github.com/miniupnp/miniupnp/releases/download/miniupnpc_2_3_3/miniupnpc-2.3.3.tar.gz",
   sha3 = "ecb1917f05205ec2b06c25169e3cae6a3fede5b64fcb40acf7067b6244273a81",
   build = "make",
   flags = { "LIBDIR=lib64" }
};

transmission = {
   url = "https://github.com/transmission/transmission/releases/download/4.0.6/transmission-4.0.6.tar.xz",
   sha3 = "ffcde68d683cd0f0b264a0522da77b1f27d7a42ab787b9375200a0eec46506d5",
   build = "cmake",
   flags = {
      "-DENABLE_{GTK,QT,TESTS,WEB}=OFF",
      "-DUSE_SYSTEM_{DEFLATE,DHT,MINIUPNPC,NATPMP}=ON",
   },
};

fragments = {
   url = "https://gitlab.gnome.org/World/Fragments/-/archive/2.0.2/Fragments-2.0.2.tar.gz",
   build = "meson",
};

torrential = {
   url = "https://github.com/davidmhewitt/torrential/archive/2.0.1/torrential-2.0.1.tar.gz",
   sha3 = "47bf568d11aeaa96bf0010ed8034ed1c5ebd2bcafdaedb73c0ce5cb3bbf622fb",
   build = "meson",
};

boost_1_88_0 = {
   url = "https://archives.boost.io/release/1.88.0/source/boost_1_88_0.tar.bz2",
   sha3 = "c7e966823aa9e5b87a29258d0d11c0b5f7eb0f508bccb4a31e521f0ec5f3941e",
   build = _,
   post = [[
      cd tools/build
      ./bootstrap.sh
      install -d $destdir/usr/bin
      install src/engine/b2 $destdir/usr/bin
   ]]
};

libtorrent-rasterbar = {
   url = "https://github.com/arvidn/libtorrent/releases/download/v2.0.11/libtorrent-rasterbar-2.0.11.tar.gz", 
   sha3 = "60d0e0ffc926c1ad7c608bf68211f48b15b3312b6e66e09e548e808068f05764",
   build = "b2",
   flags = { "fpic=on", "boost-link=static" },
   prepare = [[ if ! test -f $b2; then cd $BOOST_ROOT/tools/build && ./bootstrap.sh; fi ]],
   post = [[
      cd bindings/python
      BOOST_ROOT=$BOOST_ROOT \
      $b2 -j5 variant=release fpic=on boost-link=static \
          python=3.13 stage_module install_module \
          python-install-path=$destdir/usr/lib64/python3.13/site-packages
   ]]
};

deluge = {
   url = "https://ftp.osuosl.org/pub/deluge/source/2.2/deluge-2.2.0.tar.xz",
   sha3 = "d521b589098532060779bad99c0570223f673119d8416c8bbb57e0bcdb8db4f3",
   build = "python-build",
};
