xdg-dbus-proxy = {
   url = "https://github.com/flatpak/xdg-dbus-proxy/releases/download/0.1.6/xdg-dbus-proxy-0.1.6.tar.xz",
   sha3 = "57497aa3cb9d71bdbdb937affe1f2f69ec48217205bf8b5fe9d6422c66d33de4",
   build = "meson",
   flags = { "-Dman=disabled" }
};

ostree = {
   url = "https://github.com/ostreedev/ostree/releases/download/v2025.6/libostree-2025.6.tar.xz",
   sha3 = "b827866032c78bd7a6332bd808a859608c2f1151fc032a2adf5647e85df42038",
   build = "./configure",
   flags = {
      "--with-curl",
      "--with-ed25519-libsodium",
      "--with-grub2-mkconfig-path=/usr/bin/grub-mkconfig",
      "--with-modern-grub",
      "--with-openssl",
      "--without-soup",
      "--disable-man",
   },
   post = [[ 
      mv $destdir/usr/lib/ostree $destdir/usr/lib64 
      rmdir $destdir/usr/lib
   ]]
};

libxmlb = {
   url = "https://github.com/hughsie/libxmlb/releases/download/0.3.24/libxmlb-0.3.24.tar.xz",
   sha3 = "9abe0d0b1b2c57c4d17dd3a5ae8afb920df20028ea89315564973bb152d662da",
   build = "meson",
   flags = { "-Dintrospection=true", "-D{gtkdoc,tests}=false" },
};

libfyaml = {
   url = "https://github.com/pantoniou/libfyaml/releases/download/v0.9/libfyaml-0.9.tar.gz",
   sha3 = "a379858887156c2023f1203a4b1df4c6b4530aac66c9785e57bfdca0574459eb",
   build = "./configure",
};

appstream = {
   url = "https://www.freedesktop.org/software/appstream/releases/AppStream-1.1.1.tar.xz",
   sha3 = "333761f9d818e314a3df1bbe7b07bb0c3dc471eff1c73d3ffe78ef6c7eff19fc",
   build = "meson",
   flags = {
      "-Dsystemd=false",
      "-Dapidocs=false",
      "-Dinstall-docs=false",
      "-Dman=false",
      "-Dstemming=false",
      "-Dvapi=false",
      "-Dcompose=true",
   },
   prepare = [[
      mv AppStream*/* . && rm -fr AppStream*
      sed -i "/subdir('docs\/')/d" meson.build
      sed -i "s/version: '>= 2.48'/version: '>= 2.40'/" compose/meson.build
   ]]
};

bubblewrap = {
   url = "https://github.com/projectatomic/bubblewrap/releases/download/v0.11.0/bubblewrap-0.11.0.tar.xz",
   sha3 = "3af7c478f908a1dd601159d8f88f3cd26af066c1f8934c695f3c063ed44e6733",
   build = "meson",
   flags = { "-Dselinux=disabled" }
};

flatpak = {
   url = "https://github.com/flatpak/flatpak/releases/download/1.16.1/flatpak-1.16.1.tar.xz",
   sha3 = "f5d4e02a5103f4597863ab5c5187e4a366b33e01b131e9cc06ac6fb92bc2ba23",
   build = "meson",
   flags = {
      "-Dsystem_bubblewrap=bwrap",
      "-Dsystem_dbus_proxy=xdg-dbus-proxy",
      "-Dsystemd=disabled",
      "-Dsystem_helper=disabled",
      "-Dtests=false",
   },
   post = [[ rm -fr "$destdir/usr/lib" ]]
};
